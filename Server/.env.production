# Production Environment Configuration
# This is a template - copy to .env.production and fill in actual values
# IMPORTANT: Use strong random values for all secrets

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
PORT=5000
NODE_ENV=production
API_VERSION=v1
API_BASE_URL=https://api.example.com/api/v1
DEBUG=general-store:error       # Only log errors in production

# ============================================================================
# DATABASE
# ============================================================================
# Use MongoDB Atlas with authentication
MONGODB_URI=mongodb+srv://prod_user:prod_password@prod-cluster.mongodb.net/general_store

# ============================================================================
# AUTHENTICATION (JWT)
# ============================================================================
# IMPORTANT: Generate cryptographically secure random strings
# Use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your_production_jwt_secret_32_chars_minimum_length_here
JWT_EXPIRE=7d
JWT_REFRESH_SECRET=your_production_jwt_refresh_secret_32_chars_minimum_length
JWT_REFRESH_EXPIRE=30d

# ============================================================================
# CORS & FRONTEND
# ============================================================================
CORS_ORIGIN=https://app.example.com,https://store.example.com
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400
FRONTEND_URL=https://app.example.com

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=warn              # Only warn and error logs in production

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# Rate Limiting (Strict production limits)
RATE_LIMIT_WINDOW_MS=900000       # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100       # Standard limit
RATE_LIMIT_AUTH_MAX=5             # Very strict auth limit
RATE_LIMIT_UPLOAD_MAX=50
RATE_LIMIT_SEARCH_MAX=30

# Content Security Policy
CSP_ENABLED=true
CSP_REPORT_URI=https://api.example.com/csp-report

# HTTPS/Security Headers
ENFORCE_HTTPS=true                # MUST be true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true                 # Enable for public APIs

# File Upload Security
MAX_FILE_SIZE=5242880             # 5MB - strict limit
MAX_FILES_PER_UPLOAD=5
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,webp,pdf
UPLOAD_SCAN_MALWARE=true          # Enable in production

# ============================================================================
# FILE STORAGE
# ============================================================================
# Use cloud storage (recommended)
STORAGE_TYPE=s3                   # or cloudinary

# AWS S3 Configuration (Use IAM roles if possible)
AWS_ACCESS_KEY_ID=production_access_key
AWS_SECRET_ACCESS_KEY=production_secret_key
AWS_REGION=us-east-1
AWS_S3_BUCKET=general-store-production-assets
AWS_S3_ENDPOINT=https://s3.us-east-1.amazonaws.com

# OR Cloudinary Configuration
# CLOUDINARY_CLOUD_NAME=production_cloud_name
# CLOUDINARY_API_KEY=production_api_key
# CLOUDINARY_API_SECRET=production_api_secret

# ============================================================================
# EMAIL CONFIGURATION
# ============================================================================
EMAIL_SERVICE=sendgrid            # or gmail, aws_ses
EMAIL_USER=your_sendgrid_api_key
EMAIL_PASSWORD=                   # Not needed for SendGrid
EMAIL_FROM=noreply@example.com

# ============================================================================
# MONITORING & ALERTING
# ============================================================================
SENTRY_DSN=https://your_key@sentry.io/project_id
NEW_RELIC_ENABLED=true
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key
DATADOG_ENABLED=true
DATADOG_API_KEY=your_datadog_api_key

# ============================================================================
# PERFORMANCE OPTIMIZATION
# ============================================================================
# Cache configuration
REDIS_URL=redis://cache-server:6379
CACHE_TTL=3600                    # 1 hour

# CDN Configuration
CDN_URL=https://cdn.example.com

# ============================================================================
# THIRD-PARTY INTEGRATIONS
# ============================================================================
# Payment Processing
STRIPE_SECRET_KEY=sk_live_your_stripe_key
STRIPE_PUBLIC_KEY=pk_live_your_stripe_key

# Analytics
GOOGLE_ANALYTICS_ID=UA-XXXXXXXXX-X
MIXPANEL_TOKEN=your_mixpanel_token

# ============================================================================
# BACKUP & DISASTER RECOVERY
# ============================================================================
# Database Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"       # 2 AM daily
BACKUP_RETENTION_DAYS=30

# Replication
MONGODB_REPLICA_SET=rs0
MONGODB_REPLICATION_ENABLED=true

# ============================================================================
# SECURITY CERTIFICATES
# ============================================================================
SSL_CERT_PATH=/etc/letsencrypt/live/api.example.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/api.example.com/privkey.pem

# ============================================================================
# COMPLIANCE
# ============================================================================
GDPR_ENABLED=true
DATA_RETENTION_DAYS=90
AUDIT_LOGGING_ENABLED=true

# ============================================================================
# EMERGENCY CONTACTS
# ============================================================================
# For critical alerts
ADMIN_EMAIL=admin@example.com
SUPPORT_EMAIL=support@example.com
SECURITY_EMAIL=security@example.com
